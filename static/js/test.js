// Generated by CoffeeScript 1.6.3
var LoginController, TestController;

TestController = function($rootScope, $scope, $window) {
  $scope.Constants = $window.Constants;
  return true;
};

LoginController = function($scope, $window, $http) {
  var reset;
  $scope.loginSent = false;
  reset = function() {
    return $scope.$apply(function() {
      $scope.loginSent = false;
      return true;
    });
  };
  $scope.sendEmail = function(form) {
    var email;
    email = form.email.$modelValue;
    $scope.loginSent = true;
    $window.setInterval(reset, Constants.login_timeout);
    $http({
      url: "/api/v2/sessions/new",
      method: "GET",
      params: {
        email: email
      }
    }).success(function(response) {
      return alert(response);
    }).error(function(data, status, headers, config) {
      return alert(status);
    });
    return true;
  };
  $scope.emailChange = function(loginEmail) {
    if (loginEmail.$valid) {
      $('#emailGroup').removeClass('has-error');
      $('#emailGroup').addClass('has-success');
    } else {
      $('#emailGroup').removeClass('has-success');
      $('#emailGroup').addClass('has-error');
    }
    return true;
  };
  $scope.submit = function() {
    alert('Hehe');
    return true;
  };
  return true;
};
